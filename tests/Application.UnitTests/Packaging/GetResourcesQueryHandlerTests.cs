using Application.UnitTests.Common.Fixture;
using ResourcePackerGUI.Application.Common.Exceptions;
using ResourcePackerGUI.Application.Common.Interfaces;
using ResourcePackerGUI.Application.Packaging.Queries.GetPackageResources;
using ResourcePackerGUI.Domain.Structures;

namespace Application.UnitTests.Packaging
{
    [Collection(QueryCollection.CollectionName)]
    public class GetResourcesQueryHandlerTests
    {
        private readonly IAesEncryptionService _aesEncryptionService;
        private readonly ICrc32Service _crc32Service;
        private readonly IMediaTypeService _mediaTypeService;

        private static readonly Entry[] EntriesEncrypted =
        {
            new() {Crc = 1449897466, DataSize = 282, Id = 2520461065, Offset = 76, PackSize = 288},
            new() {Crc = 2909368490, DataSize = 315, Id = 2827296083, Offset = 364, PackSize = 320},
            new() {Crc = 3855723112, DataSize = 980, Id = 3450444729, Offset = 684, PackSize = 992}
        };

        private static readonly Entry[] Entries =
        {
            new() {Crc = 1449897466, DataSize = 282, Id = 2520461065, Offset = 76, PackSize = 282},
            new() {Crc = 2909368490, DataSize = 315, Id = 2827296083, Offset = 358, PackSize = 315},
            new() {Crc = 3855723112, DataSize = 980, Id = 3450444729, Offset = 673, PackSize = 980}
        };

        public GetResourcesQueryHandlerTests(QueryTestFixture fixture)
        {
            _aesEncryptionService = fixture.AesEncryptionService;
            _crc32Service = fixture.Crc32Service;
            _mediaTypeService = fixture.MediaTypeService;
        }

        [Fact]
        public async Task GetResources()
        {
            await using var stream = new MemoryStream(SampleResourcePackage);
            using var binaryReader = new BinaryReader(stream);
            var query = new GetPackageResourcesQuery(Entries, binaryReader);
            var sut = new GetPackageResourcesQueryHandler(_aesEncryptionService, _crc32Service, _mediaTypeService);
            var result = await sut.Handle(query, default);
            Assert.NotNull(result);
            Assert.Equal(3, result.Count);
            Assert.Equal(ExpectedMushroomBrownPng, result[0].Data);
            Assert.Equal(ExpectedPlantPng, result[1].Data);
            Assert.Equal(ExpectedSmwBackgroundPng, result[2].Data);
        }

        [Fact]
        public async Task GetResources_WithEncryption()
        {
            await using var stream = new MemoryStream(SampleResourcePackageEncrypted);
            using var binaryReader = new BinaryReader(stream);
            var query = new GetPackageResourcesQuery(EntriesEncrypted, binaryReader, "Welkom01!");
            var sut = new GetPackageResourcesQueryHandler(_aesEncryptionService, _crc32Service, _mediaTypeService);
            var result = await sut.Handle(query, default);
            Assert.NotNull(result);
            Assert.Equal(3, result.Count);
            Assert.Equal(ExpectedMushroomBrownPng, result[0].Data);
            Assert.Equal(ExpectedPlantPng, result[1].Data);
            Assert.Equal(ExpectedSmwBackgroundPng, result[2].Data);
        }

        [Fact]
        public async Task GetResources_EnteredInvalidPassword_ThrowsInvalidPasswordException()
        {
            await using var stream = new MemoryStream(SampleResourcePackageEncrypted);
            using var binaryReader = new BinaryReader(stream);
            var query = new GetPackageResourcesQuery(EntriesEncrypted, binaryReader, "Password123!");
            var sut = new GetPackageResourcesQueryHandler(_aesEncryptionService, _crc32Service, _mediaTypeService);
            await Assert.ThrowsAsync<InvalidPasswordException>(() => sut.Handle(query, default));
        }

        #region Sample resource packages

        /// <summary>
        /// A resource package created with the original command-line tool.
        /// </summary>
        private static readonly byte[] SampleResourcePackage =
        {
            82, 101, 115, 80, 97, 99, 107, 0, 0, 0, 0, 0, 3, 0, 0, 0, 9, 47, 59, 150,
            250, 173, 107, 86, 26, 1, 0, 0, 26, 1, 0, 0, 76, 0, 0, 0, 83, 29, 133, 168,
            170, 112, 105, 173, 59, 1, 0, 0, 59, 1, 0, 0, 102, 1, 0, 0, 185, 155, 169,
            205, 104, 170, 209, 229, 212, 3, 0, 0, 212, 3, 0, 0, 161, 2, 0, 0, 137, 80,
            78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 25, 0, 0, 0,
            33, 4, 3, 0, 0, 0, 222, 238, 29, 144, 0, 0, 0, 18, 80, 76, 84, 69, 0, 0, 0,
            85, 59, 25, 108, 72, 20, 148, 109, 39, 179, 142, 71, 65, 43, 15, 48, 142,
            193, 40, 0, 0, 0, 1, 116, 82, 78, 83, 0, 64, 230, 216, 102, 0, 0, 0, 182,
            73, 68, 65, 84, 24, 211, 117, 205, 203, 13, 131, 48, 12, 6, 224, 180, 18,
            247, 218, 136, 123, 227, 100, 128, 66, 24, 0, 129, 7, 32, 72, 222, 127, 149,
            26, 39, 84, 81, 213, 58, 151, 124, 250, 253, 112, 63, 139, 227, 210, 96,
            229, 248, 193, 204, 145, 215, 43, 12, 105, 101, 77, 11, 238, 169, 104, 169,
            34, 82, 209, 211, 68, 20, 56, 234, 51, 221, 48, 164, 57, 18, 91, 39, 128,
            15, 54, 200, 47, 213, 1, 216, 171, 54, 222, 78, 101, 15, 154, 77, 41, 37,
            83, 0, 101, 168, 234, 112, 68, 160, 83, 182, 51, 71, 64, 68, 147, 133, 172,
            123, 125, 26, 85, 22, 42, 53, 126, 152, 220, 17, 55, 208, 170, 186, 17, 165,
            81, 89, 212, 101, 36, 61, 233, 139, 6, 145, 76, 228, 135, 34, 16, 233, 36,
            131, 148, 49, 24, 118, 231, 68, 97, 34, 235, 169, 133, 83, 171, 254, 75,
            251, 127, 249, 86, 7, 180, 202, 224, 90, 13, 173, 68, 174, 223, 27, 121,
            206, 37, 24, 249, 122, 183, 139, 0, 0, 0, 0, 73, 69, 78, 68, 174, 66, 96,
            130, 137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0,
            36, 0, 0, 0, 36, 4, 3, 0, 0, 0, 19, 46, 133, 171, 0, 0, 0, 15, 80, 76, 84,
            69, 0, 0, 0, 65, 43, 15, 113, 106, 12, 75, 57, 22, 150, 135, 21, 141, 112,
            72, 163, 0, 0, 0, 1, 116, 82, 78, 83, 0, 64, 230, 216, 102, 0, 0, 0, 218,
            73, 68, 65, 84, 40, 207, 133, 209, 209, 169, 196, 32, 16, 133, 97, 19, 44,
            32, 71, 27, 136, 227, 54, 96, 166, 1, 35, 246, 95, 211, 61, 113, 46, 201,
            226, 194, 238, 15, 190, 124, 40, 163, 232, 190, 214, 123, 157, 196, 55, 221,
            231, 77, 249, 112, 83, 159, 155, 124, 254, 69, 158, 75, 52, 206, 148, 39,
            170, 164, 50, 6, 118, 249, 39, 49, 178, 235, 26, 229, 221, 101, 24, 185,
            137, 252, 77, 171, 30, 70, 189, 213, 155, 116, 207, 40, 110, 149, 151, 123,
            104, 139, 23, 133, 110, 192, 18, 0, 18, 66, 245, 93, 198, 148, 222, 112,
            117, 17, 133, 32, 44, 129, 45, 8, 189, 145, 214, 172, 236, 128, 229, 229,
            122, 21, 169, 64, 147, 209, 73, 98, 120, 10, 103, 112, 163, 5, 128, 8, 152,
            128, 100, 161, 137, 98, 180, 63, 191, 35, 82, 16, 181, 12, 242, 188, 22,
            169, 183, 20, 57, 25, 155, 99, 34, 82, 201, 128, 22, 206, 30, 196, 39, 160,
            81, 192, 147, 70, 236, 12, 114, 98, 20, 73, 86, 120, 65, 205, 110, 90, 83,
            72, 176, 12, 216, 34, 162, 38, 79, 146, 11, 216, 246, 70, 25, 152, 169, 124,
            210, 242, 70, 127, 222, 20, 41, 233, 136, 179, 233, 50, 0, 0, 0, 0, 73, 69,
            78, 68, 174, 66, 96, 130, 137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73,
            72, 68, 82, 0, 0, 0, 128, 0, 0, 0, 48, 4, 3, 0, 0, 0, 43, 218, 111, 141, 0,
            0, 0, 27, 80, 76, 84, 69, 112, 176, 208, 192, 224, 224, 232, 240, 248, 0,
            96, 184, 16, 80, 112, 64, 128, 160, 168, 208, 208, 0, 0, 0, 144, 192, 192,
            121, 129, 121, 234, 0, 0, 3, 116, 73, 68, 65, 84, 72, 199, 133, 149, 77, 79,
            227, 48, 16, 134, 13, 2, 206, 56, 139, 114, 119, 14, 220, 193, 171, 138, 99,
            170, 186, 247, 30, 146, 123, 163, 93, 69, 253, 7, 123, 94, 33, 161, 254,
            236, 125, 231, 43, 227, 148, 165, 140, 68, 193, 83, 207, 227, 39, 158, 96,
            135, 156, 115, 71, 209, 116, 75, 164, 108, 241, 179, 32, 118, 58, 176, 92,
            208, 56, 140, 227, 190, 100, 0, 164, 106, 114, 192, 243, 82, 222, 135, 48,
            142, 195, 26, 209, 27, 224, 254, 126, 28, 134, 93, 200, 175, 82, 245, 226,
            10, 63, 100, 102, 233, 101, 222, 56, 150, 178, 18, 48, 3, 86, 8, 89, 171,
            54, 177, 209, 136, 191, 164, 94, 231, 137, 68, 37, 224, 6, 80, 40, 225, 85,
            1, 121, 74, 26, 173, 213, 59, 1, 18, 107, 1, 223, 4, 7, 168, 66, 132, 128,
            215, 251, 211, 22, 23, 88, 109, 66, 232, 12, 144, 231, 200, 49, 251, 66,
            245, 90, 195, 206, 1, 181, 130, 3, 64, 224, 176, 121, 23, 10, 99, 217, 57,
            184, 218, 132, 96, 143, 118, 56, 232, 156, 30, 100, 217, 224, 5, 115, 160,
            196, 222, 122, 113, 70, 100, 139, 55, 5, 244, 242, 64, 5, 40, 66, 35, 168,
            253, 12, 136, 143, 58, 30, 138, 148, 199, 216, 158, 22, 196, 95, 3, 72, 87,
            25, 96, 6, 2, 184, 137, 177, 54, 56, 235, 70, 41, 225, 45, 6, 107, 142, 46,
            90, 25, 56, 192, 12, 172, 30, 14, 32, 40, 96, 167, 0, 93, 244, 147, 1, 102,
            63, 154, 1, 230, 91, 204, 243, 249, 157, 158, 32, 134, 82, 27, 12, 181, 129,
            3, 204, 0, 243, 227, 162, 112, 58, 27, 160, 218, 121, 44, 210, 187, 65, 185,
            52, 80, 1, 87, 64, 34, 88, 235, 108, 145, 222, 13, 202, 165, 129, 11, 196,
            150, 20, 24, 64, 163, 73, 159, 104, 81, 156, 144, 249, 56, 203, 112, 146, 1,
            225, 44, 58, 164, 97, 36, 3, 199, 57, 160, 69, 156, 78, 0, 216, 0, 95, 143,
            80, 234, 13, 0, 2, 140, 100, 168, 11, 126, 64, 65, 0, 77, 250, 175, 129,
            156, 11, 6, 72, 113, 20, 5, 55, 56, 25, 128, 240, 188, 232, 218, 64, 207, 5,
            5, 116, 241, 222, 6, 236, 44, 11, 98, 79, 20, 48, 137, 83, 109, 96, 231,
            130, 2, 18, 25, 244, 110, 64, 10, 2, 104, 200, 175, 21, 167, 149, 129, 157,
            11, 10, 224, 182, 184, 1, 47, 232, 0, 94, 245, 194, 192, 206, 133, 30, 0, 4,
            191, 41, 107, 131, 247, 171, 6, 126, 46, 244, 12, 96, 155, 94, 117, 74, 245,
            143, 143, 52, 98, 27, 53, 188, 223, 119, 33, 224, 111, 206, 209, 128, 166,
            4, 5, 180, 67, 89, 142, 152, 59, 187, 11, 12, 177, 180, 159, 242, 195, 192,
            105, 26, 12, 96, 221, 105, 79, 211, 190, 152, 65, 125, 23, 152, 129, 228,
            104, 50, 61, 182, 1, 246, 6, 192, 65, 60, 13, 86, 183, 190, 11, 86, 6, 61,
            115, 37, 73, 52, 56, 10, 32, 165, 231, 184, 87, 192, 229, 93, 224, 6, 40,
            81, 131, 173, 2, 246, 6, 64, 159, 162, 190, 214, 159, 239, 2, 55, 224, 9,
            220, 123, 51, 24, 12, 48, 99, 82, 41, 182, 200, 250, 46, 216, 178, 65, 49,
            192, 65, 55, 129, 70, 180, 73, 156, 68, 61, 12, 108, 206, 229, 93, 176, 37,
            131, 2, 184, 91, 73, 251, 96, 160, 0, 48, 229, 109, 251, 13, 164, 197, 83,
            8, 244, 65, 51, 232, 210, 86, 228, 109, 150, 120, 165, 222, 103, 252, 240,
            119, 196, 196, 187, 246, 68, 79, 106, 245, 84, 72, 31, 224, 132, 201, 0,
            183, 40, 226, 114, 140, 21, 16, 25, 64, 219, 57, 73, 27, 92, 192, 1, 244,
            110, 107, 125, 167, 245, 29, 253, 77, 191, 155, 198, 12, 116, 255, 43, 129,
            0, 10, 3, 90, 92, 218, 90, 223, 73, 189, 3, 110, 64, 96, 3, 235, 159, 11,
            56, 32, 78, 41, 225, 87, 167, 128, 174, 6, 60, 196, 36, 6, 193, 1, 69, 5,
            28, 0, 5, 21, 232, 68, 192, 227, 129, 236, 184, 207, 26, 180, 184, 1, 232,
            179, 231, 220, 28, 85, 160, 19, 1, 15, 188, 3, 9, 6, 53, 160, 103, 200, 10,
            0, 130, 10, 116, 42, 224, 128, 105, 138, 202, 238, 18, 247, 244, 1, 153, 58,
            218, 99, 200, 27, 201, 253, 249, 34, 12, 208, 70, 238, 247, 220, 182, 171,
            219, 39, 132, 156, 145, 251, 30, 144, 102, 238, 41, 20, 234, 152, 143, 0,
            64, 129, 226, 27, 64, 60, 190, 80, 79, 89, 193, 3, 2, 0, 100, 206, 93, 7,
            164, 116, 220, 80, 79, 161, 48, 207, 186, 58, 226, 40, 128, 13, 114, 215,
            13, 154, 38, 2, 128, 158, 10, 193, 2, 245, 0, 8, 97, 254, 18, 144, 40, 98,
            27, 50, 245, 84, 9, 94, 15, 0, 19, 174, 0, 26, 4, 181, 58, 83, 79, 37, 30,
            180, 220, 1, 64, 124, 5, 248, 7, 27, 209, 5, 112, 18, 191, 252, 254, 0, 0,
            0, 0, 73, 69, 78, 68, 174, 66, 96, 130
        };

        /// <summary>
        /// A resource package created with the original command-line tool. <br/>
        /// Encrypted with password: Welkom01!
        /// </summary>
        private static readonly byte[] SampleResourcePackageEncrypted = {
            82, 101, 115, 80, 97, 99, 107, 0, 0, 0, 0, 0, 3, 0, 0, 0, 9, 47, 59, 150,
            250, 173, 107, 86, 26, 1, 0, 0, 32, 1, 0, 0, 76, 0, 0, 0, 83, 29, 133, 168,
            170, 112, 105, 173, 59, 1, 0, 0, 64, 1, 0, 0, 108, 1, 0, 0, 185, 155, 169,
            205, 104, 170, 209, 229, 212, 3, 0, 0, 224, 3, 0, 0, 172, 2, 0, 0, 74, 155,
            8, 160, 115, 224, 195, 93, 152, 168, 187, 169, 140, 226, 5, 249, 84, 110,
            13, 25, 81, 95, 136, 188, 129, 179, 128, 68, 102, 60, 148, 28, 77, 160, 70,
            115, 236, 30, 145, 133, 127, 176, 105, 113, 37, 88, 45, 98, 215, 91, 81,
            177, 205, 77, 148, 161, 38, 209, 34, 162, 63, 185, 172, 225, 163, 5, 231,
            226, 158, 9, 49, 97, 176, 180, 173, 178, 33, 110, 151, 132, 61, 63, 234, 71,
            50, 207, 81, 0, 53, 4, 248, 235, 162, 131, 175, 220, 11, 56, 240, 190, 225,
            208, 132, 165, 182, 96, 25, 167, 75, 110, 16, 62, 99, 189, 178, 84, 73, 190,
            173, 231, 148, 14, 41, 25, 243, 68, 25, 183, 80, 17, 75, 93, 231, 190, 36,
            14, 57, 110, 136, 115, 17, 140, 120, 47, 53, 96, 69, 38, 65, 38, 249, 137,
            114, 162, 222, 75, 255, 206, 46, 179, 48, 98, 177, 1, 86, 49, 150, 71, 176,
            233, 153, 223, 86, 18, 50, 91, 196, 14, 0, 166, 180, 119, 87, 37, 190, 144,
            216, 22, 63, 68, 175, 211, 211, 81, 216, 236, 243, 244, 219, 20, 97, 18, 39,
            249, 211, 166, 249, 60, 251, 211, 218, 124, 188, 178, 17, 104, 201, 254,
            191, 80, 229, 29, 141, 137, 172, 164, 178, 34, 141, 117, 138, 13, 185, 120,
            169, 147, 159, 4, 121, 5, 212, 130, 240, 214, 143, 172, 14, 172, 71, 102,
            170, 24, 186, 225, 181, 15, 53, 171, 121, 81, 95, 127, 8, 38, 47, 129, 106,
            124, 2, 211, 231, 65, 20, 92, 61, 40, 63, 102, 114, 242, 39, 161, 205, 254,
            166, 125, 234, 26, 74, 155, 8, 160, 115, 224, 195, 93, 152, 168, 187, 169,
            140, 226, 5, 249, 101, 71, 144, 1, 81, 170, 253, 110, 221, 123, 210, 196,
            97, 115, 58, 15, 158, 127, 226, 228, 223, 11, 29, 200, 46, 225, 9, 33, 24,
            151, 183, 160, 43, 241, 58, 210, 192, 3, 32, 240, 96, 37, 161, 79, 16, 31,
            66, 184, 46, 96, 41, 121, 252, 176, 225, 7, 167, 58, 48, 249, 105, 239, 206,
            230, 23, 155, 212, 38, 223, 203, 209, 97, 176, 93, 183, 241, 210, 251, 200,
            37, 223, 157, 52, 237, 96, 9, 21, 158, 219, 78, 113, 46, 177, 177, 171, 72,
            85, 98, 108, 208, 178, 155, 145, 218, 108, 51, 230, 155, 168, 119, 33, 165,
            13, 34, 123, 89, 70, 251, 153, 15, 84, 29, 105, 239, 118, 138, 84, 32, 15,
            46, 226, 242, 43, 44, 154, 5, 14, 110, 162, 48, 144, 29, 7, 18, 18, 133, 8,
            100, 164, 163, 143, 245, 180, 46, 8, 184, 49, 229, 172, 109, 207, 140, 113,
            129, 92, 26, 171, 61, 242, 24, 35, 98, 95, 140, 172, 191, 139, 236, 158, 95,
            230, 23, 187, 169, 149, 218, 127, 16, 212, 254, 220, 150, 15, 148, 45, 244,
            69, 104, 238, 205, 77, 127, 157, 213, 2, 15, 243, 14, 58, 145, 208, 39, 198,
            195, 217, 220, 189, 235, 28, 225, 5, 121, 217, 236, 243, 227, 172, 84, 20,
            72, 130, 67, 92, 26, 207, 145, 177, 96, 9, 123, 215, 220, 20, 239, 197, 190,
            218, 183, 87, 86, 58, 191, 218, 192, 90, 86, 63, 57, 222, 138, 178, 36, 168,
            113, 34, 131, 143, 155, 32, 211, 200, 43, 220, 78, 237, 165, 170, 228, 128,
            57, 113, 243, 201, 120, 145, 172, 137, 100, 10, 68, 234, 95, 96, 136, 71,
            212, 123, 85, 145, 201, 5, 87, 189, 57, 74, 155, 8, 160, 115, 224, 195, 93,
            152, 168, 187, 169, 140, 226, 5, 249, 91, 36, 89, 107, 80, 73, 221, 104,
            146, 155, 241, 143, 117, 238, 52, 17, 157, 48, 128, 12, 16, 104, 173, 65,
            177, 96, 244, 17, 6, 3, 251, 255, 102, 72, 137, 215, 124, 65, 103, 230, 71,
            197, 205, 213, 146, 12, 35, 71, 86, 14, 121, 73, 124, 176, 243, 206, 145,
            52, 60, 48, 247, 46, 47, 194, 101, 114, 1, 25, 202, 77, 99, 76, 58, 142,
            103, 196, 55, 134, 104, 226, 240, 152, 118, 138, 25, 90, 115, 16, 131, 20,
            49, 231, 186, 80, 54, 168, 198, 154, 62, 60, 113, 191, 146, 242, 147, 138,
            229, 240, 117, 236, 227, 217, 93, 71, 115, 8, 203, 159, 2, 104, 248, 138,
            123, 17, 89, 230, 66, 32, 69, 105, 62, 190, 173, 61, 184, 21, 26, 148, 191,
            116, 129, 85, 61, 130, 30, 44, 31, 27, 146, 17, 215, 237, 141, 177, 43, 98,
            230, 187, 117, 194, 74, 212, 219, 162, 13, 176, 223, 49, 113, 165, 148, 38,
            118, 22, 0, 35, 23, 135, 165, 138, 27, 46, 65, 21, 25, 228, 246, 67, 112,
            92, 42, 186, 68, 205, 159, 246, 18, 239, 153, 222, 194, 157, 12, 81, 6, 85,
            77, 14, 82, 180, 20, 193, 68, 94, 222, 148, 141, 123, 149, 91, 108, 212,
            162, 37, 97, 90, 114, 22, 240, 178, 175, 198, 117, 59, 189, 228, 251, 31,
            54, 181, 179, 40, 22, 45, 181, 122, 85, 181, 151, 137, 50, 18, 136, 78, 40,
            109, 231, 203, 54, 81, 105, 167, 238, 255, 230, 222, 46, 85, 33, 106, 100,
            202, 152, 74, 138, 137, 13, 126, 7, 72, 241, 29, 138, 80, 181, 236, 70, 109,
            119, 198, 206, 80, 108, 132, 145, 111, 107, 11, 86, 21, 213, 8, 229, 10,
            186, 153, 116, 6, 138, 159, 185, 160, 53, 189, 229, 118, 184, 242, 167, 170,
            166, 192, 25, 156, 168, 59, 154, 81, 72, 222, 128, 185, 23, 53, 230, 182,
            54, 130, 195, 126, 118, 115, 157, 227, 237, 60, 180, 204, 123, 226, 209, 68,
            190, 56, 120, 57, 63, 210, 157, 80, 76, 160, 15, 215, 47, 73, 114, 179, 212,
            28, 16, 123, 199, 102, 167, 152, 104, 69, 107, 57, 210, 178, 34, 5, 27, 251,
            238, 241, 101, 150, 132, 119, 17, 61, 138, 17, 175, 236, 251, 88, 72, 178,
            16, 11, 223, 151, 168, 37, 202, 6, 125, 39, 201, 173, 168, 126, 95, 62, 194,
            2, 55, 156, 120, 159, 104, 38, 65, 52, 126, 140, 142, 245, 90, 174, 222, 47,
            46, 150, 48, 68, 244, 126, 180, 121, 67, 51, 49, 207, 31, 111, 253, 23, 19,
            146, 212, 172, 34, 156, 227, 27, 68, 217, 203, 182, 175, 97, 147, 55, 136,
            29, 202, 35, 233, 157, 167, 138, 67, 119, 75, 106, 104, 102, 141, 128, 161,
            250, 104, 212, 134, 95, 218, 211, 226, 122, 126, 246, 204, 97, 184, 45, 211,
            222, 27, 97, 140, 90, 119, 200, 80, 90, 18, 167, 38, 105, 222, 246, 210, 22,
            136, 202, 229, 119, 50, 194, 204, 64, 225, 172, 254, 160, 250, 249, 159, 94,
            151, 80, 181, 249, 9, 14, 107, 120, 30, 7, 15, 196, 166, 27, 243, 183, 27,
            21, 99, 158, 168, 169, 208, 88, 157, 131, 107, 59, 217, 220, 182, 206, 23,
            7, 152, 22, 224, 126, 20, 3, 228, 118, 98, 160, 253, 221, 204, 185, 47, 146,
            51, 117, 236, 245, 233, 138, 43, 175, 209, 245, 100, 55, 83, 131, 116, 3,
            98, 137, 152, 171, 53, 0, 248, 16, 254, 200, 217, 40, 213, 147, 204, 20,
            150, 194, 140, 205, 245, 120, 171, 242, 105, 73, 30, 244, 252, 2, 91, 142,
            182, 220, 140, 38, 210, 154, 22, 184, 62, 68, 67, 254, 46, 129, 194, 206,
            23, 54, 77, 236, 206, 145, 178, 61, 190, 112, 55, 204, 175, 13, 25, 70, 223,
            225, 84, 1, 163, 166, 172, 49, 248, 43, 182, 208, 27, 234, 122, 1, 130, 145,
            71, 37, 248, 27, 163, 45, 11, 241, 216, 57, 16, 177, 129, 108, 100, 137, 76,
            161, 217, 24, 68, 241, 222, 181, 178, 80, 74, 152, 68, 214, 239, 108, 70,
            35, 107, 99, 248, 162, 228, 32, 239, 190, 56, 75, 107, 111, 232, 26, 101,
            153, 56, 41, 114, 57, 57, 236, 239, 237, 183, 182, 50, 88, 81, 207, 46, 182,
            64, 187, 117, 140, 133, 152, 124, 89, 30, 167, 135, 159, 93, 121, 235, 205,
            223, 102, 10, 227, 237, 178, 55, 210, 87, 187, 6, 83, 218, 162, 11, 85, 17,
            34, 47, 24, 100, 229, 20, 12, 161, 255, 208, 5, 118, 5, 121, 11, 145, 100,
            39, 207, 70, 170, 54, 7, 245, 159, 9, 122, 31, 107, 69, 105, 115, 126, 23,
            6, 215, 24, 202, 76, 102, 111, 143, 43, 228, 197, 47, 46, 206, 9, 2, 34, 22,
            171, 117, 129, 139, 106, 169, 56, 188, 82, 1, 11, 210, 194, 92, 173, 247,
            224, 169, 57, 16, 194, 77, 251, 83, 218, 205, 62, 209, 178, 232, 193, 118,
            129, 178, 27, 210, 248, 161, 181, 42, 174, 8, 162, 205, 143, 245, 76, 24,
            59, 187, 186, 205, 30, 215, 32, 94, 85, 119, 155, 54, 87, 179, 179, 171,
            235, 243, 181, 103, 54, 199, 195, 191, 159, 237, 1, 170, 186, 230, 18, 248,
            45, 178, 193, 229, 139, 157, 144, 153, 229, 41, 155, 114, 66, 83, 235, 214,
            51, 180, 145, 181, 141, 57, 121, 48, 184, 44, 91, 139, 66, 245, 126, 148,
            55, 135, 56, 229, 216, 210, 139, 232, 79, 118, 184, 48, 188, 245, 212, 22,
            22, 109, 186, 204, 14, 120, 200, 113, 78, 205, 217, 134, 86, 68, 238
        };

        #endregion Sample resource packages

        #region Expected files

        private static readonly byte[] ExpectedSmwBackgroundPng =
        {
            137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 128,
            0, 0, 0, 48, 4, 3, 0, 0, 0, 43, 218, 111, 141, 0, 0, 0, 27, 80, 76, 84, 69,
            112, 176, 208, 192, 224, 224, 232, 240, 248, 0, 96, 184, 16, 80, 112, 64,
            128, 160, 168, 208, 208, 0, 0, 0, 144, 192, 192, 121, 129, 121, 234, 0, 0,
            3, 116, 73, 68, 65, 84, 72, 199, 133, 149, 77, 79, 227, 48, 16, 134, 13, 2,
            206, 56, 139, 114, 119, 14, 220, 193, 171, 138, 99, 170, 186, 247, 30, 146,
            123, 163, 93, 69, 253, 7, 123, 94, 33, 161, 254, 236, 125, 231, 43, 227,
            148, 165, 140, 68, 193, 83, 207, 227, 39, 158, 96, 135, 156, 115, 71, 209,
            116, 75, 164, 108, 241, 179, 32, 118, 58, 176, 92, 208, 56, 140, 227, 190,
            100, 0, 164, 106, 114, 192, 243, 82, 222, 135, 48, 142, 195, 26, 209, 27,
            224, 254, 126, 28, 134, 93, 200, 175, 82, 245, 226, 10, 63, 100, 102, 233,
            101, 222, 56, 150, 178, 18, 48, 3, 86, 8, 89, 171, 54, 177, 209, 136, 191,
            164, 94, 231, 137, 68, 37, 224, 6, 80, 40, 225, 85, 1, 121, 74, 26, 173,
            213, 59, 1, 18, 107, 1, 223, 4, 7, 168, 66, 132, 128, 215, 251, 211, 22, 23,
            88, 109, 66, 232, 12, 144, 231, 200, 49, 251, 66, 245, 90, 195, 206, 1, 181,
            130, 3, 64, 224, 176, 121, 23, 10, 99, 217, 57, 184, 218, 132, 96, 143, 118,
            56, 232, 156, 30, 100, 217, 224, 5, 115, 160, 196, 222, 122, 113, 70, 100,
            139, 55, 5, 244, 242, 64, 5, 40, 66, 35, 168, 253, 12, 136, 143, 58, 30,
            138, 148, 199, 216, 158, 22, 196, 95, 3, 72, 87, 25, 96, 6, 2, 184, 137,
            177, 54, 56, 235, 70, 41, 225, 45, 6, 107, 142, 46, 90, 25, 56, 192, 12,
            172, 30, 14, 32, 40, 96, 167, 0, 93, 244, 147, 1, 102, 63, 154, 1, 230, 91,
            204, 243, 249, 157, 158, 32, 134, 82, 27, 12, 181, 129, 3, 204, 0, 243, 227,
            162, 112, 58, 27, 160, 218, 121, 44, 210, 187, 65, 185, 52, 80, 1, 87, 64,
            34, 88, 235, 108, 145, 222, 13, 202, 165, 129, 11, 196, 150, 20, 24, 64,
            163, 73, 159, 104, 81, 156, 144, 249, 56, 203, 112, 146, 1, 225, 44, 58,
            164, 97, 36, 3, 199, 57, 160, 69, 156, 78, 0, 216, 0, 95, 143, 80, 234, 13,
            0, 2, 140, 100, 168, 11, 126, 64, 65, 0, 77, 250, 175, 129, 156, 11, 6, 72,
            113, 20, 5, 55, 56, 25, 128, 240, 188, 232, 218, 64, 207, 5, 5, 116, 241,
            222, 6, 236, 44, 11, 98, 79, 20, 48, 137, 83, 109, 96, 231, 130, 2, 18, 25,
            244, 110, 64, 10, 2, 104, 200, 175, 21, 167, 149, 129, 157, 11, 10, 224,
            182, 184, 1, 47, 232, 0, 94, 245, 194, 192, 206, 133, 30, 0, 4, 191, 41,
            107, 131, 247, 171, 6, 126, 46, 244, 12, 96, 155, 94, 117, 74, 245, 143,
            143, 52, 98, 27, 53, 188, 223, 119, 33, 224, 111, 206, 209, 128, 166, 4, 5,
            180, 67, 89, 142, 152, 59, 187, 11, 12, 177, 180, 159, 242, 195, 192, 105,
            26, 12, 96, 221, 105, 79, 211, 190, 152, 65, 125, 23, 152, 129, 228, 104,
            50, 61, 182, 1, 246, 6, 192, 65, 60, 13, 86, 183, 190, 11, 86, 6, 61, 115,
            37, 73, 52, 56, 10, 32, 165, 231, 184, 87, 192, 229, 93, 224, 6, 40, 81,
            131, 173, 2, 246, 6, 64, 159, 162, 190, 214, 159, 239, 2, 55, 224, 9, 220,
            123, 51, 24, 12, 48, 99, 82, 41, 182, 200, 250, 46, 216, 178, 65, 49, 192,
            65, 55, 129, 70, 180, 73, 156, 68, 61, 12, 108, 206, 229, 93, 176, 37, 131,
            2, 184, 91, 73, 251, 96, 160, 0, 48, 229, 109, 251, 13, 164, 197, 83, 8,
            244, 65, 51, 232, 210, 86, 228, 109, 150, 120, 165, 222, 103, 252, 240, 119,
            196, 196, 187, 246, 68, 79, 106, 245, 84, 72, 31, 224, 132, 201, 0, 183, 40,
            226, 114, 140, 21, 16, 25, 64, 219, 57, 73, 27, 92, 192, 1, 244, 110, 107,
            125, 167, 245, 29, 253, 77, 191, 155, 198, 12, 116, 255, 43, 129, 0, 10, 3,
            90, 92, 218, 90, 223, 73, 189, 3, 110, 64, 96, 3, 235, 159, 11, 56, 32, 78,
            41, 225, 87, 167, 128, 174, 6, 60, 196, 36, 6, 193, 1, 69, 5, 28, 0, 5, 21,
            232, 68, 192, 227, 129, 236, 184, 207, 26, 180, 184, 1, 232, 179, 231, 220,
            28, 85, 160, 19, 1, 15, 188, 3, 9, 6, 53, 160, 103, 200, 10, 0, 130, 10,
            116, 42, 224, 128, 105, 138, 202, 238, 18, 247, 244, 1, 153, 58, 218, 99,
            200, 27, 201, 253, 249, 34, 12, 208, 70, 238, 247, 220, 182, 171, 219, 39,
            132, 156, 145, 251, 30, 144, 102, 238, 41, 20, 234, 152, 143, 0, 64, 129,
            226, 27, 64, 60, 190, 80, 79, 89, 193, 3, 2, 0, 100, 206, 93, 7, 164, 116,
            220, 80, 79, 161, 48, 207, 186, 58, 226, 40, 128, 13, 114, 215, 13, 154, 38,
            2, 128, 158, 10, 193, 2, 245, 0, 8, 97, 254, 18, 144, 40, 98, 27, 50, 245,
            84, 9, 94, 15, 0, 19, 174, 0, 26, 4, 181, 58, 83, 79, 37, 30, 180, 220, 1,
            64, 124, 5, 248, 7, 27, 209, 5, 112, 18, 191, 252, 254, 0, 0, 0, 0, 73, 69,
            78, 68, 174, 66, 96, 130
        };

        private static readonly byte[] ExpectedPlantPng =
        {
            137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 36,
            0, 0, 0, 36, 4, 3, 0, 0, 0, 19, 46, 133, 171, 0, 0, 0, 15, 80, 76, 84, 69,
            0, 0, 0, 65, 43, 15, 113, 106, 12, 75, 57, 22, 150, 135, 21, 141, 112, 72,
            163, 0, 0, 0, 1, 116, 82, 78, 83, 0, 64, 230, 216, 102, 0, 0, 0, 218, 73,
            68, 65, 84, 40, 207, 133, 209, 209, 169, 196, 32, 16, 133, 97, 19, 44, 32,
            71, 27, 136, 227, 54, 96, 166, 1, 35, 246, 95, 211, 61, 113, 46, 201, 226,
            194, 238, 15, 190, 124, 40, 163, 232, 190, 214, 123, 157, 196, 55, 221, 231,
            77, 249, 112, 83, 159, 155, 124, 254, 69, 158, 75, 52, 206, 148, 39, 170,
            164, 50, 6, 118, 249, 39, 49, 178, 235, 26, 229, 221, 101, 24, 185, 137,
            252, 77, 171, 30, 70, 189, 213, 155, 116, 207, 40, 110, 149, 151, 123, 104,
            139, 23, 133, 110, 192, 18, 0, 18, 66, 245, 93, 198, 148, 222, 112, 117, 17,
            133, 32, 44, 129, 45, 8, 189, 145, 214, 172, 236, 128, 229, 229, 122, 21,
            169, 64, 147, 209, 73, 98, 120, 10, 103, 112, 163, 5, 128, 8, 152, 128, 100,
            161, 137, 98, 180, 63, 191, 35, 82, 16, 181, 12, 242, 188, 22, 169, 183, 20,
            57, 25, 155, 99, 34, 82, 201, 128, 22, 206, 30, 196, 39, 160, 81, 192, 147,
            70, 236, 12, 114, 98, 20, 73, 86, 120, 65, 205, 110, 90, 83, 72, 176, 12,
            216, 34, 162, 38, 79, 146, 11, 216, 246, 70, 25, 152, 169, 124, 210, 242,
            70, 127, 222, 20, 41, 233, 136, 179, 233, 50, 0, 0, 0, 0, 73, 69, 78, 68,
            174, 66, 96, 130
        };

        private static readonly byte[] ExpectedMushroomBrownPng =
        {
            137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 25,
            0, 0, 0, 33, 4, 3, 0, 0, 0, 222, 238, 29, 144, 0, 0, 0, 18, 80, 76, 84, 69,
            0, 0, 0, 85, 59, 25, 108, 72, 20, 148, 109, 39, 179, 142, 71, 65, 43, 15,
            48, 142, 193, 40, 0, 0, 0, 1, 116, 82, 78, 83, 0, 64, 230, 216, 102, 0, 0,
            0, 182, 73, 68, 65, 84, 24, 211, 117, 205, 203, 13, 131, 48, 12, 6, 224,
            180, 18, 247, 218, 136, 123, 227, 100, 128, 66, 24, 0, 129, 7, 32, 72, 222,
            127, 149, 26, 39, 84, 81, 213, 58, 151, 124, 250, 253, 112, 63, 139, 227,
            210, 96, 229, 248, 193, 204, 145, 215, 43, 12, 105, 101, 77, 11, 238, 169,
            104, 169, 34, 82, 209, 211, 68, 20, 56, 234, 51, 221, 48, 164, 57, 18, 91,
            39, 128, 15, 54, 200, 47, 213, 1, 216, 171, 54, 222, 78, 101, 15, 154, 77,
            41, 37, 83, 0, 101, 168, 234, 112, 68, 160, 83, 182, 51, 71, 64, 68, 147,
            133, 172, 123, 125, 26, 85, 22, 42, 53, 126, 152, 220, 17, 55, 208, 170,
            186, 17, 165, 81, 89, 212, 101, 36, 61, 233, 139, 6, 145, 76, 228, 135, 34,
            16, 233, 36, 131, 148, 49, 24, 118, 231, 68, 97, 34, 235, 169, 133, 83, 171,
            254, 75, 251, 127, 249, 86, 7, 180, 202, 224, 90, 13, 173, 68, 174, 223, 27,
            121, 206, 37, 24, 249, 122, 183, 139, 0, 0, 0, 0, 73, 69, 78, 68, 174, 66,
            96, 130
        };

        #endregion Expected files
    }
}